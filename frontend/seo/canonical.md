# Canonical Tag

> 검색엔진에게 비슷하거나 중복되는 콘텐츠 페이지에 대해 어떤 페이지가 원본인지 알려주는 역할; 유사하거나 중복된 페이지의 표준 페이지를 정의
>> 표준 URL: Google이 사이트의 중복된 페이지들 중 가장 대표적이라고 간주하는 페이지의 URL

- 여러 개의 URL 액세스 할 수 있는 하나의 페이지가 있거나, 콘텐ㅊ가 유사한 서로 다른 유사한 페이지가 있는 경우, Google bot은 같은 페이지의 중복 버전으로 간주함
- URL 중 하나를 표준버전으로 선택하여 크롤링하고, 나머지 모든 URL은 중복 URL로 간주하고 빈도를 줄여 크롤링
- 어떤 URL이 표준 URL인지 알리지 않으면, Google이 알아서 선택함
- 크로스 도메인 간 적용도 가능

## 표준페이지를 선택하는 기준
- http, https 중 어떤 프로토콜을 통해 게시되는지
- 페이지 품질은 어떤지
- 사이트맵에 URL이 있는지
- `rel=canonical` 라벨이 있는지
- 한 페이지의 여러 언어 버전은 주요 콘텐츠의 언어가 동일한 경우에만 중복으로 간주

## 왜 중복 페이지가 발생하나요?
- 여러 기기 유형 지원
- 검색 매개변수 또는 세션 ID등을 위해 동적 URL 사용
- 여러 섹션에 같은 글 지원 시 블로그 시스템에서 여러 URL을 자동 저장하는 경우
- www의 유무, http/https 변형
  - http > https 전환 시, 캐노니컬 태그도 최신 URL을 반영해야 함; http > https로 리다이렉트 시킨 뒤, 적용

## 표준 페이지 지정

#### 일반 가이드라인
- 표준화를 목적으로 robots.txt 를 사용하면 안됨
- 서로 다른 URL을 같은 페이지의 표준 URL로 지정하면 안됨
- noindex를 사용해서는 안됨 (색인에서 페이지를 제외하기 위해 사용)
- hreflang 태그를 사용하는 경우 표준 페이지를 지정해야함
- HTTP 보다 HTTP를 선호

#### `rel=canonical` 링크 태그 사용
- 표준 페이지로 연결되는 모든 중복 페이지의 코드에 `<link>` 태그를 추가
- 장점: 무한히 많은 중복 페이지 매핑
- 단점
  - 페이지 크기가 커질 수 있으며
  - URL이 자주 변경되는 사이트의 매핑 유지가 복잡
  - HTML만 지원 가능
- 상대경로보다는 절대경로를 사용

```html
<link rel="canonical" href="https://example.com/dresses/green-dresses" />
```

#### `rel=canonical` HTTP 헤더 사용
- 페이지 응답에 rel=canonical 헤더를 전송
- 장점
  - 페이지 크기가 커지지 않음
  - 무한히 많은 중복 페이지 매핑
- 단점: URL이 자주 변경되는 사이트의 매핑 유지가 복잡

#### 사이트맵 사용
- 사이트맵: 사이트에 있는 페이지, 동영상 및 기타 파일과 각 관계에 대한 정보를 제공하는 파일
- 장점: 용량이 큰 사이트에서 쉽게 사용하고 관리
- 단점: Googlebot이 내가 사이트맵에서 선언한 표준 페이지와 관련된 중복페이지가 어떤 것인지 판단해야 함

#### 301 리다이렉션
- 중복 페이지를 더 이상 사용하지 않는 경우에 사용

---
## Reference
- https://support.google.com/webmasters/answer/139066?hl=ko

